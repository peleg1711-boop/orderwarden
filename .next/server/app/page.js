(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},3485:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>f,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>i}),s(908),s(2291),s(5866);var a=s(3191),r=s(8716),l=s(7922),d=s.n(l),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let i=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,908)),"E:\\orderwarden\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7421))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,1228))).default(e)],openGraph:[async e=>(await Promise.resolve().then(s.bind(s,5193))).default(e)],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,2291)),"E:\\orderwarden\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,7421))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,1228))).default(e)],openGraph:[async e=>(await Promise.resolve().then(s.bind(s,5193))).default(e)],twitter:[],manifest:void 0}}],c=["E:\\orderwarden\\app\\page.tsx"],x="/page",f={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},9852:(e,t,s)=>{Promise.resolve().then(s.bind(s,149))},149:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(326),r=s(7626),l=s.n(r),d=s(7577),n=s(6775),o=s(434);function i({isOpen:e,title:t,message:s,confirmText:r="Confirm",cancelText:l="Cancel",variant:n="danger",onConfirm:o,onCancel:i}){let c=(0,d.useRef)(null);return e?a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeInUp",onClick:i,role:"alertdialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":"modal-description",children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-3xl shadow-2xl max-w-md w-full p-8 border border-slate-700",onClick:e=>e.stopPropagation(),children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:`p-4 rounded-full ${"danger"===n?"bg-red-500/20":"bg-amber-500/20"}`,children:a.jsx("svg",{className:`w-8 h-8 ${"danger"===n?"text-red-500":"text-amber-500"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}),a.jsx("h2",{id:"modal-title",className:"text-2xl font-black text-white text-center mb-3",children:t}),a.jsx("p",{id:"modal-description",className:"text-slate-400 text-center mb-8",children:s}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{ref:c,onClick:i,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-xl transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 focus:ring-offset-slate-800",children:l}),a.jsx("button",{onClick:o,className:`flex-1 ${"danger"===n?"bg-red-600 hover:bg-red-500 focus:ring-red-500":"bg-amber-600 hover:bg-amber-500 focus:ring-amber-500"} text-white font-bold py-3 rounded-xl transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800`,children:r})]})]})}):null}function c({userId:e,onOrderClick:t}){let[s,r]=(0,d.useState)([]),[l,n]=(0,d.useState)(!1),[o,i]=(0,d.useState)(!1),c=(0,d.useRef)(null),x=s.filter(e=>!e.read).length,f=async e=>{r(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},m=async()=>{r(e=>e.map(e=>({...e,read:!0})))},h=e=>{f(e.id),e.orderId&&t&&(t(e.orderId),n(!1))},u=e=>{switch(e){case"risk_alert":return a.jsx("div",{className:"p-2 rounded-full bg-amber-500/20",children:a.jsx("svg",{className:"w-4 h-4 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})});case"delivery":return a.jsx("div",{className:"p-2 rounded-full bg-emerald-500/20",children:a.jsx("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})});case"exception":return a.jsx("div",{className:"p-2 rounded-full bg-red-500/20",children:a.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})});default:return a.jsx("div",{className:"p-2 rounded-full bg-blue-500/20",children:a.jsx("svg",{className:"w-4 h-4 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}},b=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),r=Math.floor(s/36e5),l=Math.floor(s/864e5);return a<1?"Just now":a<60?`${a}m ago`:r<24?`${r}h ago`:l<7?`${l}d ago`:t.toLocaleDateString()};return(0,a.jsxs)("div",{className:"relative",ref:c,children:[(0,a.jsxs)("button",{onClick:()=>n(!l),className:"relative p-2 rounded-full hover:bg-slate-700 transition-colors","aria-label":"Notifications",children:[a.jsx("svg",{className:"w-6 h-6 text-slate-400 hover:text-white transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),x>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 rounded-full text-xs font-bold text-white flex items-center justify-center",children:x>9?"9+":x})]}),l&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-slate-800 rounded-2xl shadow-xl border border-slate-700 overflow-hidden z-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-700",children:[a.jsx("h3",{className:"text-white font-bold",children:"Notifications"}),x>0&&a.jsx("button",{onClick:m,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:"Mark all as read"})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:o?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent"})}):0===s.length?(0,a.jsxs)("div",{className:"py-8 text-center",children:[a.jsx("svg",{className:"w-12 h-12 mx-auto text-slate-600 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),a.jsx("p",{className:"text-slate-400 text-sm",children:"No notifications yet"}),a.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"We'll notify you when something happens"})]}):s.map(e=>(0,a.jsxs)("button",{onClick:()=>h(e),className:`w-full flex items-start gap-3 p-4 hover:bg-slate-700/50 transition-colors text-left ${e.read?"":"bg-slate-700/30"}`,children:[u(e.type),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-white font-medium text-sm truncate",children:e.title}),!e.read&&a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),a.jsx("p",{className:"text-slate-400 text-sm mt-0.5 line-clamp-2",children:e.message}),a.jsx("p",{className:"text-slate-500 text-xs mt-1",children:b(e.createdAt)})]})]},e.id))}),s.length>0&&a.jsx("div",{className:"px-4 py-3 border-t border-slate-700 text-center",children:a.jsx("button",{className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:"View all notifications"})})]})]})}let x="http://localhost:3000";function f({message:e,type:t,onClose:s}){return(0,a.jsxs)("div",{className:`fixed bottom-4 right-4 ${"success"===t?"bg-emerald-500":"error"===t?"bg-red-500":"bg-blue-500"} text-white px-6 py-3 rounded-xl shadow-lg z-50 animate-fadeInUp flex items-center gap-3`,children:[a.jsx("span",{className:"font-medium",children:e}),a.jsx("button",{onClick:s,className:"hover:opacity-70",children:"✕"})]})}function m({orders:e,onOrderClick:t}){let s=e.filter(e=>"green"===e.riskLevel).length,r=e.filter(e=>"yellow"===e.riskLevel).length,l=e.filter(e=>"red"===e.riskLevel).length,d=e.length||1,n=e.filter(e=>"yellow"===e.riskLevel||"red"===e.riskLevel).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,3),o=({label:e,count:t,total:s,color:r})=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-sm font-bold text-slate-300",children:e}),a.jsx("span",{className:"text-sm font-bold text-white",children:t})]}),a.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2.5",children:a.jsx("div",{className:`${r} h-2.5 rounded-full transition-all duration-500`,style:{width:`${t/s*100}%`}})})]});return(0,a.jsxs)("div",{className:"bg-slate-800/50 rounded-2xl shadow-xl p-6 border-2 border-slate-700 backdrop-blur-sm h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Delivery Risk Overview"}),(0,a.jsxs)("span",{className:"relative flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[a.jsx(o,{label:"Healthy",count:s,total:d,color:"bg-gradient-to-r from-emerald-500 to-green-600"}),a.jsx(o,{label:"Needs attention",count:r,total:d,color:"bg-gradient-to-r from-amber-500 to-yellow-600"}),a.jsx(o,{label:"High risk",count:l,total:d,color:"bg-gradient-to-r from-red-500 to-rose-600"})]}),(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-slate-300 mb-3",children:"Recent At-Risk Orders"}),a.jsx("div",{className:"space-y-3",children:n.length>0?n.map(e=>(0,a.jsxs)("div",{onClick:()=>t?.(e.id),className:"flex items-center p-2 rounded-lg hover:bg-slate-700/50 transition-colors cursor-pointer",children:[a.jsx("span",{className:`h-3 w-3 rounded-full mr-3 ${"red"===e.riskLevel?"bg-red-500":"bg-amber-400"}`}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-white",children:e.orderId}),a.jsx("p",{className:"text-xs text-slate-400",children:e.lastStatus||"Unknown"})]}),a.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-lg ${"red"===e.riskLevel?"text-red-400 bg-red-500/20":"text-amber-300 bg-amber-500/20"}`,children:"red"===e.riskLevel?"Urgent":"Follow up"})]},e.id)):a.jsx("p",{className:"text-sm text-slate-400",children:"No at-risk orders right now. Great job!"})})]})]})}function h(){let{isLoaded:e,isSignedIn:t}=(0,n.aF)(),{userId:s}=(0,n.aC)(),[r,h]=(0,d.useState)([]),[p,g]=(0,d.useState)(!0),[j,v]=(0,d.useState)(null),[w,k]=(0,d.useState)(!1),[N,y]=(0,d.useState)(null),[C,L]=(0,d.useState)(null),[S,D]=(0,d.useState)(""),[T,$]=(0,d.useState)("all"),[U,M]=(0,d.useState)("all"),[P,A]=(0,d.useState)("all"),[I,z]=(0,d.useState)("createdAt"),[E,F]=(0,d.useState)("desc"),[O,_]=(0,d.useState)(new Set),[B,W]=(0,d.useState)({connected:!1}),[R,q]=(0,d.useState)(null),[H,V]=(0,d.useState)(!1),[G,Y]=(0,d.useState)(!1),[J,X]=(0,d.useState)(null),[Z,K]=(0,d.useState)(!1),[Q,ee]=(0,d.useState)(null),[et,es]=(0,d.useState)(null),[ea,er]=(0,d.useState)(!1),[el,ed]=(0,d.useState)(new Set),[en,eo]=(0,d.useState)(1),[ei,ec]=(0,d.useState)("all"),ex=(0,d.useMemo)(()=>{if("all"===ei)return r;let e=new Date,t={today:new Date(e.getFullYear(),e.getMonth(),e.getDate()),"7days":new Date(e.getTime()-6048e5),"30days":new Date(e.getTime()-2592e6)};return r.filter(e=>new Date(e.createdAt)>=t[ei])},[r,ei]),ef=(0,d.useMemo)(()=>{let e=[...r];if(S){let t=S.toLowerCase();e=e.filter(e=>e.orderId.toLowerCase().includes(t)||e.trackingNumber.toLowerCase().includes(t)||e.carrier&&e.carrier.toLowerCase().includes(t))}if("all"!==T&&(e=e.filter(e=>e.riskLevel===T)),"all"!==U&&(e=e.filter(e=>e.lastStatus===U)),"all"!==P){let t;let s=new Date;switch(P){case"7days":t=new Date(s.getTime()-6048e5);break;case"30days":t=new Date(s.getTime()-2592e6);break;case"90days":t=new Date(s.getTime()-7776e6);break;default:t=new Date(0)}e=e.filter(e=>new Date(e.createdAt)>=t)}return e.sort((e,t)=>{let s,a;switch(I){case"orderId":s=e.orderId,a=t.orderId;break;case"trackingNumber":s=e.trackingNumber,a=t.trackingNumber;break;case"lastStatus":s=e.lastStatus||"",a=t.lastStatus||"";break;case"riskLevel":let r={red:3,yellow:2,green:1};s=r[e.riskLevel]||0,a=r[t.riskLevel]||0;break;case"lastUpdateAt":s=e.lastUpdateAt?new Date(e.lastUpdateAt).getTime():0,a=t.lastUpdateAt?new Date(t.lastUpdateAt).getTime():0;break;default:s=new Date(e.createdAt).getTime(),a=new Date(t.createdAt).getTime()}return"asc"===E?s>a?1:-1:s<a?1:-1}),e},[r,S,T,U,P,I,E]),em=Math.ceil(ef.length/20),eh=(0,d.useMemo)(()=>{let e=(en-1)*20;return ef.slice(e,e+20)},[ef,en]),eu=e=>{I===e?F("asc"===E?"desc":"asc"):(z(e),F("desc"))},eb=e=>{let t=new Set(O);t.has(e)?t.delete(e):t.add(e),_(t)},ep=e=>{navigator.clipboard.writeText(e),L({message:"Tracking number copied!",type:"success"})},eg=async()=>{if(s)try{g(!0);let e=await fetch(`${x}/api/orders`,{headers:{"x-clerk-user-id":s}}),t=await e.json();h(t.orders||[]),v(null)}catch(e){v("Failed to load orders")}finally{g(!1)}},ej=async()=>{if(s)try{let e=await fetch(`${x}/api/etsy/status`,{headers:{"x-clerk-user-id":s}}),t=await e.json();W({...t,syncing:!1})}catch(e){console.error("Failed to fetch Etsy status:",e)}},ev=async()=>{if(s)try{K(!0),ee(null);let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=Math.ceil((e.getTime()-t.getTime())/864e5)||1,r=await fetch(`${x}/api/metrics/summary?range=${a}d`,{headers:{"x-clerk-user-id":s}}),l=await r.json();if(!r.ok)throw Error(l.error||"Failed to load impact summary");X(l)}catch(e){console.error("Failed to fetch impact summary:",e),ee("Failed to load impact summary")}finally{K(!1)}},ew=async()=>{if(s){V(!0);try{let e=await fetch("/api/billing/create-checkout",{method:"POST",headers:{"x-clerk-user-id":s}}),t=await e.json();t.checkoutUrl&&(window.location.href=t.checkoutUrl)}catch(e){L({message:"Failed to start upgrade",type:"error"})}finally{V(!1)}}},ek=async()=>{if(s)try{let e=await fetch(`${x}/api/billing/portal`,{headers:{"x-clerk-user-id":s}}),t=await e.json();t.portalUrl&&window.open(t.portalUrl,"_blank")}catch(e){L({message:"Failed to open subscription portal",type:"error"})}},eN=async()=>{if(s){W(e=>({...e,syncing:!0}));try{let e=await fetch(`${x}/api/etsy/sync`,{method:"POST",headers:{"x-clerk-user-id":s}}),t=await e.json();t.success?(L({message:`Synced! ${t.imported} new orders imported`,type:"success"}),eg(),ej()):L({message:`Sync failed: ${t.error}`,type:"error"})}catch(e){L({message:"Failed to sync orders",type:"error"})}finally{W(e=>({...e,syncing:!1}))}}},ey=async()=>{if(s&&confirm("Are you sure you want to disconnect your Etsy shop?"))try{await fetch(`${x}/api/etsy/disconnect`,{method:"POST",headers:{"x-clerk-user-id":s}}),W({connected:!1}),L({message:"Etsy disconnected",type:"info"})}catch(e){L({message:"Failed to disconnect",type:"error"})}},eC=async e=>{if(s)try{(await fetch(`${x}/api/orders/${e}`,{method:"DELETE",headers:{"x-clerk-user-id":s}})).ok?(h(r.filter(t=>t.id!==e)),_(t=>{let s=new Set(t);return s.delete(e),s}),L({message:"Order deleted",type:"success"})):L({message:"Failed to delete order",type:"error"})}catch(e){L({message:"Failed to delete order",type:"error"})}},eL=e=>{es({title:"Delete Order?",message:"Are you sure you want to delete this order? This action cannot be undone.",onConfirm:()=>{es(null),eC(e)}})},eS=async()=>{if(!s||0===O.size)return;let e=0;for(let t of O)try{(await fetch(`${x}/api/orders/${t}`,{method:"DELETE",headers:{"x-clerk-user-id":s}})).ok&&e++}catch(e){}h(r.filter(e=>!O.has(e.id))),_(new Set),L({message:`Deleted ${e} orders`,type:"success"})},eD=async e=>{if(s){ed(t=>new Set(t).add(e));try{let t=await fetch(`${x}/api/orders/${e}/check`,{method:"POST",headers:{"x-clerk-user-id":s}}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to check tracking");h(r.map(t=>t.id===e?a.order:t)),L({message:"Tracking updated",type:"success"})}catch(e){L({message:e instanceof Error?e.message:"Failed to check tracking",type:"error"})}finally{ed(t=>{let s=new Set(t);return s.delete(e),s})}}},eT=async()=>{if(!s||0===O.size)return;er(!0);let e=0,t=0,a=Array.from(O);(await Promise.allSettled(a.map(e=>fetch(`${x}/api/orders/${e}/check`,{method:"POST",headers:{"x-clerk-user-id":s}}).then(e=>e.json())))).forEach((s,r)=>{"fulfilled"===s.status&&s.value.order?(e++,h(e=>e.map(e=>e.id===a[r]?s.value.order:e))):t++}),er(!1),_(new Set),L({message:t>0?`Updated ${e} orders. ${t} failed.`:`Updated tracking for ${e} orders`,type:t>0?"info":"success"})},e$=e=>{if(!e)return"bg-gray-700 text-gray-300";switch(e.toLowerCase()){case"green":return"bg-emerald-500 text-white";case"yellow":return"bg-amber-400 text-gray-900";case"red":return"bg-red-500 text-white";default:return"bg-gray-700 text-gray-300"}},eU=e=>{if(!e)return"Unknown";switch(e.toLowerCase()){case"green":return"Healthy";case"yellow":return"Needs Attention";case"red":return"High Risk";default:return"Unknown"}},eM=e=>{let t={pre_transit:{label:"Pre-Transit",color:"bg-blue-500 text-white"},in_transit:{label:"In Transit",color:"bg-blue-500 text-white"},out_for_delivery:{label:"Out for Delivery",color:"bg-emerald-500 text-white"},delivered:{label:"Delivered",color:"bg-emerald-500 text-white"},exception:{label:"Exception",color:"bg-red-500 text-white"},delivery_failed:{label:"Failed",color:"bg-red-500 text-white"},unknown:{label:"Unknown",color:"bg-gray-500 text-white"}},s=t[e||"unknown"]||t.unknown;return a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${s.color}`,children:s.label})},eP=({field:e,children:t,center:s=!1})=>a.jsx("th",{onClick:()=>eu(e),className:`px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:text-white transition-colors select-none ${s?"text-center":"text-left"}`,children:(0,a.jsxs)("div",{className:`flex items-center gap-1 ${s?"justify-center":""}`,children:[t,I===e&&a.jsx("span",{className:"text-blue-400",children:"asc"===E?"↑":"↓"})]})}),eA=(e,t)=>({usps:`https://tools.usps.com/go/TrackConfirmAction?tLabels=${t}`,ups:`https://www.ups.com/track?tracknum=${t}`,fedex:`https://www.fedex.com/fedextrack/?trknbr=${t}`,dhl:`https://www.dhl.com/en/express/tracking.html?AWB=${t}`})[e.toLowerCase()]||`https://www.google.com/search?q=${e}+tracking+${t}`;return p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),a.jsx("p",{className:"text-white text-xl font-bold",children:"Loading your orders..."})]})}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(l(),{id:"c852af9ab7dfd51e",children:'@import url("https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=Bricolage+Grotesque:wght@400;500;600;700&display=swap");body{font-family:"Bricolage Grotesque",sans-serif}h1,h2,h3,h4,h5,h6{font-family:"Syne",sans-serif}.animate-fadeInUp{-webkit-animation:fadeInUp.5s ease-out forwards;-moz-animation:fadeInUp.5s ease-out forwards;-o-animation:fadeInUp.5s ease-out forwards;animation:fadeInUp.5s ease-out forwards}@-webkit-keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeInUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeInUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.highlight-pulse{-webkit-animation:highlightPulse 2s ease-out;-moz-animation:highlightPulse 2s ease-out;-o-animation:highlightPulse 2s ease-out;animation:highlightPulse 2s ease-out}@-webkit-keyframes highlightPulse{0%,100%{background-color:transparent}25%,75%{background-color:rgba(59,130,246,.3)}}@-moz-keyframes highlightPulse{0%,100%{background-color:transparent}25%,75%{background-color:rgba(59,130,246,.3)}}@-o-keyframes highlightPulse{0%,100%{background-color:transparent}25%,75%{background-color:rgba(59,130,246,.3)}}@keyframes highlightPulse{0%,100%{background-color:transparent}25%,75%{background-color:rgba(59,130,246,.3)}}'}),C&&a.jsx(f,{message:C.message,type:C.type,onClose:()=>L(null)}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:[a.jsx("header",{className:"jsx-c852af9ab7dfd51e bg-slate-900/50 backdrop-blur-lg border-b border-slate-700 shadow-xl sticky top-0 z-10",children:a.jsx("div",{className:"jsx-c852af9ab7dfd51e max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e",children:[a.jsx("h1",{className:"jsx-c852af9ab7dfd51e text-3xl font-black tracking-tight bg-gradient-to-r from-blue-400 to-emerald-400 text-transparent bg-clip-text",children:"OrderWarden"}),a.jsx("p",{className:"jsx-c852af9ab7dfd51e text-slate-400 text-sm font-medium mt-1",children:"Protecting your Etsy shop"})]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center gap-4",children:[R&&a.jsx("div",{className:"jsx-c852af9ab7dfd51e flex items-center gap-2",children:"pro"===R.planType?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e relative",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e absolute inset-0 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full blur-md opacity-60 animate-pulse"}),a.jsx("span",{className:"jsx-c852af9ab7dfd51e relative px-4 py-1.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-black rounded-full uppercase tracking-wider shadow-lg border border-purple-300/30",children:"⚡ Pro"})]}),a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-xs text-purple-300 font-medium",children:"Unlimited"}),a.jsx("button",{onClick:ek,className:"jsx-c852af9ab7dfd51e text-slate-400 hover:text-white text-xs underline",children:"Manage"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"jsx-c852af9ab7dfd51e px-3 py-1 bg-slate-700 text-slate-300 text-xs font-bold rounded-full",children:["Free (",R.monthlyOrderCount,"/",R.limit,")"]}),a.jsx("button",{onClick:ew,disabled:H,className:"jsx-c852af9ab7dfd51e px-3 py-1.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full hover:from-purple-400 hover:to-pink-400 transition-all shadow-lg disabled:opacity-50",children:H?"...":"⚡ Upgrade"})]})}),B.connected?(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"jsx-c852af9ab7dfd51e text-sm text-emerald-400 font-medium",children:["\uD83D\uDD17 ",B.shopName]}),a.jsx("button",{onClick:eN,disabled:B.syncing,className:"jsx-c852af9ab7dfd51e bg-orange-500 text-white px-4 py-2 rounded-full font-bold text-sm hover:bg-orange-400 transition-all disabled:opacity-50",children:B.syncing?"⏳ Syncing...":"\uD83D\uDD04 Sync"}),a.jsx("button",{onClick:ey,title:"Disconnect Etsy",className:"jsx-c852af9ab7dfd51e text-slate-400 hover:text-red-400 text-sm",children:"✕"})]}):(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center gap-2 px-4 py-2 bg-slate-700/50 rounded-full border border-slate-600",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-sm text-amber-400 font-medium",children:"\uD83D\uDD17 Etsy Sync"}),a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-xs bg-amber-500/20 text-amber-400 px-2 py-0.5 rounded-full font-bold",children:"Coming Soon"})]}),a.jsx("button",{onClick:()=>k(!0),className:"jsx-c852af9ab7dfd51e bg-blue-600 text-white px-6 py-3 rounded-full font-bold text-base hover:bg-blue-500 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-blue-500/50",children:"+ Add Order"}),s&&a.jsx(c,{userId:s,onOrderClick:e=>{let t=r.find(t=>t.id===e||t.orderId===e);t&&y(t)}}),a.jsx(o.default,{href:"/settings",className:"p-2 rounded-full hover:bg-slate-700 transition-colors",title:"Settings",children:(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-6 h-6 text-slate-400 hover:text-white transition-colors",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",className:"jsx-c852af9ab7dfd51e"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z",className:"jsx-c852af9ab7dfd51e"})]})}),a.jsx("div",{className:"jsx-c852af9ab7dfd51e bg-slate-700 rounded-full p-1 shadow-lg",children:a.jsx(n.l8,{afterSignOutUrl:"https://landing.orderwarden.com"})})]})]})})}),(0,a.jsxs)("main",{className:"jsx-c852af9ab7dfd51e max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-fadeInUp",children:[j&&a.jsx("div",{className:"jsx-c852af9ab7dfd51e bg-red-900/50 border-l-4 border-red-500 text-red-300 px-6 py-4 rounded-lg mb-6",children:(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-2xl mr-3",children:"⚠️"}),a.jsx("span",{className:"jsx-c852af9ab7dfd51e font-semibold",children:j})]})}),G&&R?.planType==="pro"&&(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-gradient-to-r from-purple-900/50 to-pink-900/50 border border-purple-500/50 px-6 py-4 rounded-2xl mb-6 relative overflow-hidden",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e absolute inset-0 bg-gradient-to-r from-purple-500/10 to-pink-500/10 animate-pulse"}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e relative flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-3xl mr-4",children:"\uD83C\uDF89"}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e font-black text-xl text-white",children:"Welcome to OrderWarden Pro!"}),a.jsx("p",{className:"jsx-c852af9ab7dfd51e text-sm text-purple-200 mt-1",children:"You now have unlimited orders, priority support, and all Pro features unlocked."})]})]}),a.jsx("button",{onClick:()=>Y(!1),className:"jsx-c852af9ab7dfd51e text-purple-300 hover:text-white transition-colors p-2",children:a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"jsx-c852af9ab7dfd51e w-5 h-5",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12",className:"jsx-c852af9ab7dfd51e"})})})]})]}),R&&"free"===R.planType&&R.limit&&(R.monthlyOrderCount>=R.limit?a.jsx("div",{className:"jsx-c852af9ab7dfd51e bg-gradient-to-r from-purple-900/50 to-pink-900/50 border-l-4 border-purple-500 px-6 py-4 rounded-lg mb-6",children:(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-2xl mr-3",children:"\uD83D\uDEAB"}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e font-bold text-white",children:"Monthly order limit reached!"}),(0,a.jsxs)("p",{className:"jsx-c852af9ab7dfd51e text-sm text-purple-200",children:["You've used all ",R.limit," orders this month. Upgrade to Pro for unlimited orders."]})]})]}),a.jsx("button",{onClick:ew,disabled:H,className:"jsx-c852af9ab7dfd51e px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full hover:from-purple-400 hover:to-pink-400 transition-all shadow-lg disabled:opacity-50",children:H?"Loading...":"⚡ Upgrade to Pro - $19.99/mo"})]})}):R.monthlyOrderCount>=R.limit-2?a.jsx("div",{className:"jsx-c852af9ab7dfd51e bg-amber-900/30 border-l-4 border-amber-500 px-6 py-4 rounded-lg mb-6",children:(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-2xl mr-3",children:"⚡"}),(0,a.jsxs)("span",{className:"jsx-c852af9ab7dfd51e font-medium text-amber-200",children:["You've used ",R.monthlyOrderCount," of ",R.limit," free orders this month."]})]}),a.jsx("button",{onClick:ew,disabled:H,className:"jsx-c852af9ab7dfd51e px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full text-sm hover:from-purple-400 hover:to-pink-400 transition-all",children:"Upgrade to Pro"})]})}):null),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"jsx-c852af9ab7dfd51e text-xl font-bold text-white",children:"Overview"}),(0,a.jsxs)("select",{value:ei,onChange:e=>ec(e.target.value),className:"jsx-c852af9ab7dfd51e px-3 py-1.5 bg-slate-800 border border-slate-700 rounded-lg text-white text-sm focus:ring-2 focus:ring-blue-500 cursor-pointer appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2024%2024%22%20fill%3d%22none%22%20stroke%3d%22%2394a3b8%22%20stroke-width%3d%222%22%20stroke-linecap%3d%22round%22%20stroke-linejoin%3d%22round%22%3e%3cpolyline%20points%3d%226%209%2012%2015%2018%209%22%3e%3c%2fpolyline%3e%3c%2fsvg%3e')] bg-[length:16px] bg-[right_8px_center] bg-no-repeat pr-8",children:[a.jsx("option",{value:"today",className:"jsx-c852af9ab7dfd51e",children:"Today"}),a.jsx("option",{value:"7days",className:"jsx-c852af9ab7dfd51e",children:"Last 7 Days"}),a.jsx("option",{value:"30days",className:"jsx-c852af9ab7dfd51e",children:"Last 30 Days"}),a.jsx("option",{value:"all",className:"jsx-c852af9ab7dfd51e",children:"All Time"})]})]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e lg:col-span-1 grid grid-cols-2 lg:grid-cols-1 gap-4",children:[a.jsx(u,{label:"Total Orders",value:ex.length,icon:"\uD83D\uDCE6",color:"from-blue-500 to-sky-600"}),a.jsx(u,{label:"At Risk",value:ex.filter(e=>"red"===e.riskLevel||"yellow"===e.riskLevel).length,icon:"⚠️",color:"from-amber-500 to-yellow-600"}),a.jsx(u,{label:"In Transit",value:ex.filter(e=>"in_transit"===e.lastStatus).length,icon:"\uD83D\uDE9A",color:"from-indigo-500 to-purple-600"}),a.jsx(u,{label:"Delivered",value:ex.filter(e=>"delivered"===e.lastStatus).length,icon:"✅",color:"from-emerald-500 to-green-600"})]}),a.jsx("div",{className:"jsx-c852af9ab7dfd51e lg:col-span-2",children:a.jsx(m,{orders:ex,onOrderClick:e=>{let t=document.querySelector(`[data-order-id="${e}"]`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("highlight-pulse"),setTimeout(()=>t.classList.remove("highlight-pulse"),2e3))}})})]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-800/50 rounded-2xl shadow-xl p-6 border border-slate-700 mb-8",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e",children:[a.jsx("h3",{className:"jsx-c852af9ab7dfd51e text-lg font-bold text-white",children:"Impact This Month"}),a.jsx("p",{className:"jsx-c852af9ab7dfd51e text-xs text-slate-400",children:"This calendar month"})]}),(0,a.jsxs)("button",{onClick:ev,disabled:Z,className:"jsx-c852af9ab7dfd51e text-blue-400 hover:text-blue-300 text-sm flex items-center gap-1 disabled:opacity-50",children:[a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:`jsx-c852af9ab7dfd51e w-4 h-4 ${Z?"animate-spin":""}`,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",className:"jsx-c852af9ab7dfd51e"})}),Z?"Refreshing...":"Refresh"]})]}),Q?a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-center py-4 text-red-400 bg-red-500/10 rounded-xl",children:Q}):Z&&!J?(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e text-center py-6 text-slate-400",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent mx-auto mb-2"}),"Loading impact summary..."]}):J?(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-700/40 rounded-xl p-4 border border-slate-600/40",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-xs text-slate-400 uppercase tracking-wide",children:"Tracking Checks"}),a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-2xl font-black text-white mt-1",children:J.trackingChecks})]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-700/40 rounded-xl p-4 border border-slate-600/40",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-xs text-slate-400 uppercase tracking-wide",children:"Risk Flagged"}),a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-2xl font-black text-amber-300 mt-1",children:J.riskFlagged})]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-700/40 rounded-xl p-4 border border-slate-600/40",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-xs text-slate-400 uppercase tracking-wide",children:"Risks Resolved"}),a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-2xl font-black text-emerald-300 mt-1",children:J.riskResolved})]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-700/40 rounded-xl p-4 border border-slate-600/40",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-xs text-slate-400 uppercase tracking-wide",children:"Refunds Avoided"}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e text-2xl font-black text-emerald-300 mt-1",children:["$",J.estimatedRefundsAvoided.toFixed(2)]})]})]}):a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-center py-6 text-slate-400",children:"No impact data yet. Track an order to get started."})]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-800/50 rounded-2xl p-4 mb-6 border border-slate-700",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex flex-wrap gap-4 items-center",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e flex-1 min-w-[200px]",children:(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e relative",children:[a.jsx("input",{type:"text",placeholder:"Search orders, tracking numbers...",value:S,onChange:e=>D(e.target.value),className:"jsx-c852af9ab7dfd51e w-full pl-10 pr-4 py-2 bg-slate-900 border border-slate-700 rounded-xl text-white placeholder-slate-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e absolute left-3 top-2.5 w-5 h-5 text-slate-500",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",className:"jsx-c852af9ab7dfd51e"})})]})}),(0,a.jsxs)("select",{value:T,onChange:e=>$(e.target.value),className:"jsx-c852af9ab7dfd51e px-3 pr-8 py-2 bg-slate-900 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-blue-500 appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2024%2024%22%20fill%3d%22none%22%20stroke%3d%22%2394a3b8%22%20stroke-width%3d%222%22%20stroke-linecap%3d%22round%22%20stroke-linejoin%3d%22round%22%3e%3cpolyline%20points%3d%226%209%2012%2015%2018%209%22%3e%3c%2fpolyline%3e%3c%2fsvg%3e')] bg-[length:16px] bg-[right_8px_center] bg-no-repeat cursor-pointer",children:[a.jsx("option",{value:"all",className:"jsx-c852af9ab7dfd51e",children:"All Risks"}),a.jsx("option",{value:"green",className:"jsx-c852af9ab7dfd51e",children:"Healthy"}),a.jsx("option",{value:"yellow",className:"jsx-c852af9ab7dfd51e",children:"Needs Attention"}),a.jsx("option",{value:"red",className:"jsx-c852af9ab7dfd51e",children:"High Risk"})]}),(0,a.jsxs)("select",{value:U,onChange:e=>M(e.target.value),className:"jsx-c852af9ab7dfd51e px-3 pr-8 py-2 bg-slate-900 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-blue-500 appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2024%2024%22%20fill%3d%22none%22%20stroke%3d%22%2394a3b8%22%20stroke-width%3d%222%22%20stroke-linecap%3d%22round%22%20stroke-linejoin%3d%22round%22%3e%3cpolyline%20points%3d%226%209%2012%2015%2018%209%22%3e%3c%2fpolyline%3e%3c%2fsvg%3e')] bg-[length:16px] bg-[right_8px_center] bg-no-repeat cursor-pointer",children:[a.jsx("option",{value:"all",className:"jsx-c852af9ab7dfd51e",children:"All Statuses"}),a.jsx("option",{value:"pre_transit",className:"jsx-c852af9ab7dfd51e",children:"Pre-Transit"}),a.jsx("option",{value:"in_transit",className:"jsx-c852af9ab7dfd51e",children:"In Transit"}),a.jsx("option",{value:"out_for_delivery",className:"jsx-c852af9ab7dfd51e",children:"Out for Delivery"}),a.jsx("option",{value:"delivered",className:"jsx-c852af9ab7dfd51e",children:"Delivered"}),a.jsx("option",{value:"exception",className:"jsx-c852af9ab7dfd51e",children:"Exception"}),a.jsx("option",{value:"delivery_failed",className:"jsx-c852af9ab7dfd51e",children:"Failed"})]}),(0,a.jsxs)("select",{value:P,onChange:e=>A(e.target.value),className:"jsx-c852af9ab7dfd51e px-3 pr-8 py-2 bg-slate-900 border border-slate-700 rounded-xl text-white focus:ring-2 focus:ring-blue-500 appearance-none bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2024%2024%22%20fill%3d%22none%22%20stroke%3d%22%2394a3b8%22%20stroke-width%3d%222%22%20stroke-linecap%3d%22round%22%20stroke-linejoin%3d%22round%22%3e%3cpolyline%20points%3d%226%209%2012%2015%2018%209%22%3e%3c%2fpolyline%3e%3c%2fsvg%3e')] bg-[length:16px] bg-[right_8px_center] bg-no-repeat cursor-pointer",children:[a.jsx("option",{value:"all",className:"jsx-c852af9ab7dfd51e",children:"All Time"}),a.jsx("option",{value:"7days",className:"jsx-c852af9ab7dfd51e",children:"Last 7 Days"}),a.jsx("option",{value:"30days",className:"jsx-c852af9ab7dfd51e",children:"Last 30 Days"}),a.jsx("option",{value:"90days",className:"jsx-c852af9ab7dfd51e",children:"Last 90 Days"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([[["Order Name","Tracking Number","Carrier","Status","Risk Level","Last Update"],...ef.map(e=>[e.orderId,e.trackingNumber,e.carrier||"",e.lastStatus||"",eU(e.riskLevel),e.lastUpdateAt?new Date(e.lastUpdateAt).toISOString():""])].map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`orderwarden-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),L({message:`Exported ${ef.length} orders`,type:"success"})},disabled:0===ef.length,className:"jsx-c852af9ab7dfd51e px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-xl font-bold transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-c852af9ab7dfd51e"})}),"Export CSV"]}),O.size>0&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:eT,disabled:ea,className:"jsx-c852af9ab7dfd51e px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold transition-all disabled:opacity-50 flex items-center gap-2",children:ea?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Checking..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",className:"jsx-c852af9ab7dfd51e"})}),"Check Tracking (",O.size,")"]})}),(0,a.jsxs)("button",{onClick:()=>{0!==O.size&&es({title:`Delete ${O.size} Orders?`,message:`Are you sure you want to delete ${O.size} selected orders? This action cannot be undone.`,onConfirm:()=>{es(null),eS()}})},className:"jsx-c852af9ab7dfd51e px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-xl font-bold transition-all flex items-center gap-2",children:[a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,className:"jsx-c852af9ab7dfd51e w-4 h-4",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",className:"jsx-c852af9ab7dfd51e"})}),"Delete (",O.size,")"]})]})]}),(S||"all"!==T||"all"!==U||"all"!==P)&&(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e mt-3 text-sm text-slate-400",children:["Showing ",ef.length," of ",r.length," orders",a.jsx("button",{onClick:()=>{D(""),$("all"),M("all"),A("all")},className:"jsx-c852af9ab7dfd51e ml-2 text-blue-400 hover:text-blue-300",children:"Clear filters"})]})]}),0===r.length?(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-800/50 rounded-2xl shadow-xl p-16 text-center border-2 border-slate-700",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-6xl mb-6",children:"\uD83D\uDCED"}),a.jsx("h3",{className:"jsx-c852af9ab7dfd51e text-2xl font-bold text-white mb-3",children:"No orders yet"}),a.jsx("p",{className:"jsx-c852af9ab7dfd51e text-slate-400 text-lg mb-6 max-w-md mx-auto",children:"Add your first order to start tracking deliveries"}),a.jsx("button",{onClick:()=>k(!0),className:"jsx-c852af9ab7dfd51e bg-blue-600 text-white px-8 py-4 rounded-full font-bold text-lg hover:bg-blue-500 transform hover:scale-105 transition-all shadow-lg",children:"Add Your First Order"})]}):0===ef.length?(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-800/50 rounded-2xl shadow-xl p-16 text-center border-2 border-slate-700",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-6xl mb-6",children:"\uD83D\uDD0D"}),a.jsx("h3",{className:"jsx-c852af9ab7dfd51e text-2xl font-bold text-white mb-3",children:"No orders match your filters"}),a.jsx("p",{className:"jsx-c852af9ab7dfd51e text-slate-400 text-lg mb-6",children:"Try adjusting your search or filters"}),a.jsx("button",{onClick:()=>{D(""),$("all"),M("all"),A("all")},className:"jsx-c852af9ab7dfd51e bg-blue-600 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-500 transition-all",children:"Clear Filters"})]}):(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e bg-slate-800/50 rounded-2xl shadow-xl overflow-hidden border-2 border-slate-700",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e overflow-x-auto",children:(0,a.jsxs)("table",{className:"jsx-c852af9ab7dfd51e min-w-full",children:[a.jsx("thead",{className:"jsx-c852af9ab7dfd51e bg-slate-900",children:(0,a.jsxs)("tr",{className:"jsx-c852af9ab7dfd51e",children:[a.jsx("th",{className:"jsx-c852af9ab7dfd51e px-4 py-4 text-left",children:a.jsx("input",{type:"checkbox",checked:O.size===eh.length&&eh.length>0,onChange:()=>{O.size===eh.length?_(new Set):_(new Set(eh.map(e=>e.id)))},className:"jsx-c852af9ab7dfd51e w-4 h-4 rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"})}),a.jsx(eP,{field:"orderId",className:"jsx-c852af9ab7dfd51e",children:"Order"}),a.jsx(eP,{field:"trackingNumber",className:"jsx-c852af9ab7dfd51e",children:"Tracking"}),a.jsx(eP,{field:"lastStatus",center:!0,className:"jsx-c852af9ab7dfd51e",children:"Status"}),a.jsx(eP,{field:"riskLevel",center:!0,className:"jsx-c852af9ab7dfd51e",children:"Risk"}),a.jsx(eP,{field:"lastUpdateAt",center:!0,className:"jsx-c852af9ab7dfd51e",children:"Last Update"}),a.jsx("th",{className:"jsx-c852af9ab7dfd51e px-6 py-4 text-center text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"jsx-c852af9ab7dfd51e divide-y divide-slate-700",children:eh.map(e=>(0,a.jsxs)("tr",{"data-order-id":e.id,onClick:()=>y(e),className:`jsx-c852af9ab7dfd51e hover:bg-slate-700/50 transition-colors cursor-pointer ${O.has(e.id)?"bg-blue-900/20":""}`,children:[a.jsx("td",{onClick:e=>e.stopPropagation(),className:"jsx-c852af9ab7dfd51e px-4 py-4",children:a.jsx("input",{type:"checkbox",checked:O.has(e.id),onChange:()=>eb(e.id),className:"jsx-c852af9ab7dfd51e w-4 h-4 rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500"})}),(0,a.jsxs)("td",{className:"jsx-c852af9ab7dfd51e px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"jsx-c852af9ab7dfd51e",children:(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),y(e)},className:"jsx-c852af9ab7dfd51e font-bold text-blue-400 hover:text-blue-300 text-base hover:underline text-left",children:["#",e.orderId]})}),a.jsx("div",{className:"jsx-c852af9ab7dfd51e text-sm text-slate-400 font-medium",children:e.carrier||"Unknown carrier"})]}),a.jsx("td",{onClick:e=>e.stopPropagation(),className:"jsx-c852af9ab7dfd51e px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center gap-2",children:[a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-sm text-slate-300 font-mono font-semibold",children:e.trackingNumber}),a.jsx("button",{onClick:()=>ep(e.trackingNumber),title:"Copy tracking number",className:"jsx-c852af9ab7dfd51e p-1 hover:bg-slate-700 rounded transition-colors",children:a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-4 h-4 text-slate-500 hover:text-white",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",className:"jsx-c852af9ab7dfd51e"})})})]})}),a.jsx("td",{className:"jsx-c852af9ab7dfd51e px-6 py-4 whitespace-nowrap text-center",children:e.lastStatus?eM(e.lastStatus):a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-slate-500",children:"—"})}),a.jsx("td",{className:"jsx-c852af9ab7dfd51e px-6 py-4 whitespace-nowrap text-center",children:e.riskLevel?a.jsx("span",{className:`jsx-c852af9ab7dfd51e px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${e$(e.riskLevel)}`,children:eU(e.riskLevel)}):a.jsx("span",{className:"jsx-c852af9ab7dfd51e text-slate-500",children:"—"})}),a.jsx("td",{className:"jsx-c852af9ab7dfd51e px-6 py-4 whitespace-nowrap text-sm text-slate-400 text-center",children:e.lastUpdateAt?new Date(e.lastUpdateAt).toLocaleString():"Never"}),a.jsx("td",{onClick:e=>e.stopPropagation(),className:"jsx-c852af9ab7dfd51e px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>eD(e.id),disabled:el.has(e.id),title:"Check tracking",className:"jsx-c852af9ab7dfd51e group p-1.5 rounded-lg hover:bg-blue-500/20 transition-all disabled:opacity-50",children:el.has(e.id)?(0,a.jsxs)("svg",{fill:"none",viewBox:"0 0 24 24",className:"jsx-c852af9ab7dfd51e w-5 h-5 text-blue-400 animate-spin",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",className:"jsx-c852af9ab7dfd51e opacity-25"}),a.jsx("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-c852af9ab7dfd51e opacity-75"})]}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-5 h-5 text-slate-400 group-hover:text-blue-400 transition-colors",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99",className:"jsx-c852af9ab7dfd51e"})})}),a.jsx("button",{onClick:()=>eL(e.id),title:"Delete order",className:"jsx-c852af9ab7dfd51e group p-1.5 rounded-lg hover:bg-red-500/20 transition-all",children:a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,className:"jsx-c852af9ab7dfd51e w-5 h-5 text-slate-400 group-hover:text-red-400 transition-colors",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0",className:"jsx-c852af9ab7dfd51e"})})})]})})]},e.id))})]})}),em>1&&(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center justify-between px-6 py-4 bg-slate-900/50 border-t border-slate-700",children:[(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e text-sm text-slate-400",children:["Showing ",(en-1)*20+1,"-",Math.min(20*en,ef.length)," of ",ef.length," orders"]}),(0,a.jsxs)("div",{className:"jsx-c852af9ab7dfd51e flex items-center gap-2",children:[a.jsx("button",{onClick:()=>eo(1),disabled:1===en,"aria-label":"First page",className:"jsx-c852af9ab7dfd51e p-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-4 h-4 text-white",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7",className:"jsx-c852af9ab7dfd51e"})})}),a.jsx("button",{onClick:()=>eo(e=>Math.max(1,e-1)),disabled:1===en,"aria-label":"Previous page",className:"jsx-c852af9ab7dfd51e p-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-4 h-4 text-white",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7",className:"jsx-c852af9ab7dfd51e"})})}),(0,a.jsxs)("span",{className:"jsx-c852af9ab7dfd51e px-4 py-2 text-white font-medium",children:["Page ",en," of ",em]}),a.jsx("button",{onClick:()=>eo(e=>Math.min(em,e+1)),disabled:en===em,"aria-label":"Next page",className:"jsx-c852af9ab7dfd51e p-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-4 h-4 text-white",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7",className:"jsx-c852af9ab7dfd51e"})})}),a.jsx("button",{onClick:()=>eo(em),disabled:en===em,"aria-label":"Last page",className:"jsx-c852af9ab7dfd51e p-2 rounded-lg bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-c852af9ab7dfd51e w-4 h-4 text-white",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7",className:"jsx-c852af9ab7dfd51e"})})})]})]})]})]}),w&&s&&a.jsx(b,{userId:s,onClose:()=>k(!1),onSuccess:()=>{k(!1),eg(),L({message:"Order added!",type:"success"})}}),N&&s&&a.jsx(({order:e,onClose:t,userId:s})=>{let[r,l]=(0,d.useState)(!1),[n,o]=(0,d.useState)(null),[i,c]=(0,d.useState)(null),f=(0,d.useRef)(null);(0,d.useEffect)(()=>(m(),()=>{f.current?.abort()}),[]);let m=async()=>{if(!s)return;f.current?.abort();let t=new AbortController;f.current=t;let a=setTimeout(()=>t.abort(),15e3);l(!0),o(null);try{let a=await fetch(`${x}/api/orders/${e.id}/check`,{method:"POST",headers:{"x-clerk-user-id":s},signal:t.signal});if(!a.ok)throw Error("Failed to fetch tracking");let r=await a.json();if(!r?.tracking)throw Error("Tracking data unavailable");c(r.tracking),h(t=>t.map(t=>t.id===e.id?r.order:t))}catch(e){e instanceof Error&&"AbortError"===e.name?o("Tracking request timed out. Please try again."):(console.error("Failed to fetch tracking:",e),o("Failed to load tracking history. Please try again."))}finally{clearTimeout(a),l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:t,children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-3xl shadow-2xl max-w-2xl w-full p-8 border border-slate-700 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-black text-white",children:["Order ",e.orderId]}),a.jsx("p",{className:"text-slate-400",children:e.carrier||"Unknown carrier"})]}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-slate-700/50 rounded-xl p-4",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Tracking Number"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-white font-mono text-sm break-all",children:e.trackingNumber}),a.jsx("button",{onClick:()=>ep(e.trackingNumber),className:"p-1 hover:bg-slate-600 rounded transition-colors flex-shrink-0",title:"Copy tracking number",children:a.jsx("svg",{className:"w-4 h-4 text-slate-400 hover:text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,a.jsxs)("div",{className:"bg-slate-700/50 rounded-xl p-4",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Status"}),a.jsx("div",{className:"mt-1",children:eM(e.lastStatus)})]}),(0,a.jsxs)("div",{className:"bg-slate-700/50 rounded-xl p-4",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Risk Level"}),a.jsx("span",{className:`inline-block mt-1 px-3 py-1 rounded-full text-xs font-black uppercase ${e$(e.riskLevel)}`,children:eU(e.riskLevel)})]}),(0,a.jsxs)("div",{className:"bg-slate-700/50 rounded-xl p-4",children:[a.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Last Update"}),a.jsx("p",{className:"text-white text-sm",children:e.lastUpdateAt?new Date(e.lastUpdateAt).toLocaleString():"Never"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,a.jsxs)("a",{href:`https://www.etsy.com/your/orders/sold/completed?order_id=${e.orderId}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-orange-500 hover:bg-orange-400 text-white font-bold py-2.5 rounded-xl transition-colors text-center text-sm flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View on Etsy"]}),e.carrier&&(0,a.jsxs)("a",{href:eA(e.carrier,e.trackingNumber),target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white font-bold py-2.5 rounded-xl transition-colors text-center text-sm flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Track on ",e.carrier.toUpperCase()]})]}),a.jsx("button",{onClick:t,className:"w-full bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded-xl transition-colors",children:"Close"})]})})},{order:N,onClose:()=>y(null),userId:s,className:"jsx-c852af9ab7dfd51e"}),et&&a.jsx(i,{isOpen:!0,title:et.title,message:et.message,confirmText:"Delete",variant:"danger",onConfirm:et.onConfirm,onCancel:()=>es(null)})]})]})}function u({label:e,value:t,icon:s,color:r}){return(0,a.jsxs)("div",{className:`bg-gradient-to-br ${r} rounded-2xl shadow-lg p-5 transform hover:scale-105 transition-all duration-300 hover:shadow-2xl border border-white/10`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("div",{className:"text-2xl",children:s}),a.jsx("div",{className:"text-3xl font-black text-white",children:t})]}),a.jsx("div",{className:"text-xs font-bold text-white/80 uppercase tracking-wide",children:e})]})}function b({userId:e,onClose:t,onSuccess:s}){let[r,l]=(0,d.useState)({orderId:"",trackingNumber:"",carrier:""}),[n,o]=(0,d.useState)(!1),[i,c]=(0,d.useState)(null),[f,m]=(0,d.useState)(!1),[h,u]=(0,d.useState)({}),b=()=>{let e={};return r.orderId.trim()||(e.orderId="Order name is required"),r.trackingNumber.trim()||(e.trackingNumber="Tracking number is required"),u(e),0===Object.keys(e).length},p=async t=>{if(t.preventDefault(),b()){o(!0),c(null),m(!1);try{let t=await fetch(`${x}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json","x-clerk-user-id":e},body:JSON.stringify(r)}),a=await t.json();if(!t.ok){if(a.upgradeRequired)m(!0),c(a.message||"Monthly order limit reached");else throw Error(a.error||"Failed to create order");return}s()}catch(e){c(e instanceof Error?e.message:"An error occurred")}finally{o(!1)}}},g=async()=>{try{let t=await fetch("/api/billing/create-checkout",{method:"POST",headers:{"x-clerk-user-id":e}}),s=await t.json();s.checkoutUrl&&(window.location.href=s.checkoutUrl)}catch(e){c("Failed to start upgrade")}};return a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeInUp",children:(0,a.jsxs)("div",{className:"bg-slate-800 rounded-3xl shadow-2xl max-w-lg w-full p-8 border border-slate-700",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-3xl font-black text-white",children:"Add New Order"}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i&&(0,a.jsxs)("div",{className:`${f?"bg-purple-900/50 border-purple-500":"bg-red-900/50 border-red-500"} border-l-4 px-4 py-3 rounded-lg mb-6`,children:[a.jsx("p",{className:`font-semibold ${f?"text-purple-200":"text-red-300"}`,children:i}),f&&a.jsx("button",{onClick:g,className:"mt-3 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-full text-sm hover:from-purple-400 hover:to-pink-400 transition-all",children:"⚡ Upgrade to Pro - $19.99/mo"})]}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Order Name *"}),a.jsx("input",{type:"text",value:r.orderId,onChange:e=>{l({...r,orderId:e.target.value}),h.orderId&&u(e=>({...e,orderId:void 0}))},className:`w-full px-4 py-3 bg-slate-900 border-2 ${h.orderId?"border-red-500 focus:ring-red-500/50":"border-slate-700 focus:ring-blue-500/50 focus:border-blue-500"} text-white rounded-xl focus:ring-4 font-medium`,placeholder:"e.g., Etsy #3960433496 or Sarah's necklace"}),h.orderId&&(0,a.jsxs)("p",{className:"mt-1.5 text-sm text-red-400 flex items-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h.orderId]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Tracking Number *"}),a.jsx("input",{type:"text",value:r.trackingNumber,onChange:e=>{l({...r,trackingNumber:e.target.value}),h.trackingNumber&&u(e=>({...e,trackingNumber:void 0}))},className:`w-full px-4 py-3 bg-slate-900 border-2 ${h.trackingNumber?"border-red-500 focus:ring-red-500/50":"border-slate-700 focus:ring-blue-500/50 focus:border-blue-500"} text-white rounded-xl focus:ring-4 font-mono`,placeholder:"e.g., 1Z999AA10123456784"}),h.trackingNumber&&(0,a.jsxs)("p",{className:"mt-1.5 text-sm text-red-400 flex items-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),h.trackingNumber]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-300 mb-2",children:"Carrier (optional)"}),(0,a.jsxs)("select",{value:r.carrier,onChange:e=>l({...r,carrier:e.target.value}),className:"w-full px-4 py-3 bg-slate-900 border-2 border-slate-700 text-white rounded-xl focus:ring-4 focus:ring-blue-500/50 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Auto-detect"}),a.jsx("option",{value:"USPS",children:"USPS"}),a.jsx("option",{value:"UPS",children:"UPS"}),a.jsx("option",{value:"FedEx",children:"FedEx"}),a.jsx("option",{value:"DHL",children:"DHL"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 border-2 border-slate-700 rounded-xl text-slate-300 font-bold hover:bg-slate-700 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-500 disabled:opacity-50 transition-all transform hover:scale-105 shadow-lg hover:shadow-blue-500/50",children:n?"Adding...":"Add Order"})]})]})]})})}},908:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`E:\orderwarden\app\page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[510,295,838,664],()=>s(3485));module.exports=a})();